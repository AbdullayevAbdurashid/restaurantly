(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[6],{487:function(e,t,a){"use strict";a.r(t);var n=a(131),c=a(134),i=a(40),s=a.n(i),r=a(74),o=a(21),l=a(0),d=a.n(l),b=a(432),u=a(262),j=a(427),x=a(429),h=a(430),m=a(485),O=a(478),p=a.n(O),f=a(484),g=a(431),w=a(18),k=a(200),y=a.p+"static/media/back.39f25b08.jpg",v=a(470),N=a(23),z=a(103),S=a(471),C=a(488),T=a(477),D=a(436),A=a(49),I=a.n(A),R=a(426),q=a(123),E=a(48),H=a(236),J=a.n(H),W=a(479),Y=a.n(W),B=a(425),M=(a(132),a(31)),P=a.p+"static/media/neworder.b3bc44c8.mp3",Z=a.p+"static/media/complete.7cfd4944.mp3",K=a.p+"static/media/waitercalling.9e89d866.mp3",L=a(6),F=u.a.TabPane,G=Object(v.a)((function(e){return{root:{maxWidth:345},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",marginBottom:"5px",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})),Q=Object(N.a)((function(e){return{badge:{right:-3,top:13,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}}}))(S.a);t.default=function(){var e=Object(k.b)().user,t=Object(l.useContext)(E.b),a=Object(o.a)(t,2),i=a[0],O=a[1],v=Object(l.useState)([]),N=Object(o.a)(v,2),S=N[0],A=N[1],H=Object(l.useState)([]),W=Object(o.a)(H,2),U=W[0],V=W[1],X=Object(l.useState)(!1),$=Object(o.a)(X,2),_=$[0],ee=$[1],te=Object(l.useState)(!1),ae=Object(o.a)(te,2),ne=ae[0],ce=ae[1];Object(l.useEffect)((function(){O.on("recieve-order",(function(t){"none"===t?0===S.length&&(new Audio(P).play(),q.b.warning("Yangi zakaz tushdi")):t===e&&(new Audio(P).play(),J()({title:"Yangi zakaz",subtitle:"Yangi zakaz keldi iltimos tekshiring",theme:"darkblue",native:!0}),q.b.warning("Yangi zakaz keldi iltimos tekshiring"),Object(r.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a.get("".concat(i,"/waiterOrders/").concat(e));case 2:a=t.sent,(n=a.data).reverse(),A(n);case 6:case"end":return t.stop()}}),t)})))()),Object(r.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("".concat(i,"/waiterOrders/new"));case 2:t=e.sent,(a=t.data).reverse(),V(a);case 6:case"end":return e.stop()}}),e)})))()})),O.on("take-order",(function(t){!function(t,a){a===e&&(new Audio(Z).play(),q.b.success("".concat(t,"chi stolni zakazi tayyor")),J()({title:"Zakaz tayyor",subtitle:"".concat(t,"chi stolni zakazi tayyor"),theme:"darkblue",native:!0}))}(t.table,t.responsibleWaiter)})),O.on("coming",(function(t){!function(t,a){if(a===e){J()({title:"Sizni chaqirishyapti",subtitle:"".concat(t,"- chi stol sizni chaqiryapti"),theme:"darkblue",native:!0}),new Audio(K).play(),T.a.info({title:"Sizni chaqirishyapti",content:Object(L.jsx)("div",{children:Object(L.jsxs)("p",{children:[t," - chi stol sizni chaqiryapti"]})}),onOk:function(){}});var n=setInterval((function(){new Audio(K).play()}),1e3);setTimeout((function(){clearInterval(n),O.emit("")}),3e3)}}(t.table,t.responsibleWaiter)})),Object(r.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("".concat(i,"/waiterOrders/new"));case 2:t=e.sent,(a=t.data).reverse(),V(a);case 6:case"end":return e.stop()}}),e)})))(),Object(r.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a.get("".concat(i,"/waiterOrders/").concat(e));case 2:a=t.sent,(n=a.data).reverse(),A(n);case 6:case"end":return t.stop()}}),t)})))(),T.a.info({title:"Please accept cookies",content:Object(L.jsx)("div",{children:Object(L.jsx)("p",{children:"Accept cookies to send notification"})}),onOk:function(){}})}),[]);var ie=d.a.useState(!1),se=Object(o.a)(ie,2),re=se[0],oe=se[1],le=G(),de=function(t){oe(!0),function(t){I.a.post("".concat(i,"/occupyOrder"),{table:t,name:e}).then((function(){I.a.get("".concat(i,"/waiterOrders/").concat(e)).then((function(e){var t=e.data;A(t)})),I.a.get("".concat(i,"/waiterOrders/new")).then((function(e){var t=e.data;V(t),he(!1),oe(!1)}))}))}(t)},be=function(e){he(Object(c.a)(Object(c.a)({},xe),{},Object(n.a)({},e,!xe[e])))},ue=Object(l.useState)(!1),je=Object(o.a)(ue,2),xe=je[0],he=je[1];return"false"!==localStorage.getItem("details")&&localStorage.getItem("details")?Object(L.jsxs)("div",{style:{backgroundImage:"url(".concat(y,")"),marginBottom:"30px",backgroundRepeat:"no-repeat",backgroundSize:"cover"},className:" waiters min-h-screen",children:[Object(L.jsx)(b.a,{maxWidth:"md",className:" min-h-screen backdrop-filter  backdrop-blur-md",children:Object(L.jsx)("div",{className:"text-white bg-image   h-full",children:Object(L.jsxs)(u.a,{defaultActiveKey:"1",centered:!0,children:[Object(L.jsx)(F,{className:"text-white ",tab:"Current orders",children:U&&U.map((function(e,t){return Object(L.jsx)(R.a,{in:!0,children:Object(L.jsxs)(j.a,{className:"mb-4",children:[Object(L.jsxs)(x.a,{children:[Object(L.jsxs)("h1",{className:"text-yellow-500 text-xl font-bold",children:["ORDER #",U.length-t]}),Object(L.jsxs)("h3",{className:"text-green-400   text-sm font-bold ",children:[Number(e.time.split(":")[0])-(new Date).getHours()===0?(new Date).getMinutes()-Number(e.time.split(":")[1])+" min oldin":(new Date).getHours()-Number(e.time.split(":")[0])+" soat oldin","                                             "]}),Object(L.jsxs)("h2",{className:"absolute top-4 right-4  text-yellow-500 text-lg font-bold ",children:["Stol: ",e.table]}),Object(L.jsxs)("h3",{className:"text-white text-lg font-medium",children:["Jami taomlar:",U[t].foods.length]})]}),Object(L.jsxs)(h.a,{disableSpacing:!0,children:[Object(L.jsx)("h3",{className:"text-white text-lg font-medium",children:"Taomlar:"}),Object(L.jsxs)("span",{className:"inline-block",children:[Object(L.jsx)(f.a,{className:Object(w.a)(le.expand,Object(n.a)({},le.expandOpen,_[t]?_[t]:null)),onClick:function(){return function(e,t){ee(Object(c.a)(Object(c.a)({},_),{},Object(n.a)({},e,!_[e])))}(t)},"aria-expanded":_,"aria-label":"show more",children:Object(L.jsx)(p.a,{className:"text-white  mb-1",fontSize:"large"})}),Object(L.jsx)(D.a,{title:"Tasdiqlaysizmi?",visible:xe[t],onConfirm:function(){return de(e.table)},okButtonProps:{loading:re},onCancel:function(){return be(t)},children:Object(L.jsx)(z.a.button,{whileTap:{scale:.9},onClick:function(){return be(t)},className:"w-24 absolute bottom-4 right-2 bg-gradient-to-r  d from-blue-700 h-10 rounded-xl  text-lg  focus:ring-offset-indigo-800 focus:border-transparent transit to-blue-800  text-white",type:"submit",children:"Olish \u2705"})})]})]}),Object(L.jsx)(m.a,{in:_[t]?_[t]:null,timeout:"auto",unmountOnExit:!0,children:U[t].foods.map((function(e,t){return Object(L.jsx)(x.a,{children:Object(L.jsxs)("div",{children:[Object(L.jsxs)("span",{children:[Object(L.jsx)("p",{className:" text-white text-xl  uppercase",children:e.name}),Object(L.jsx)(g.a,{style:{background:"white"}})]}),Object(L.jsx)("h2",{className:" text-yellow-400 text-xl",children:" 2x "})]},t)})}))})]})})}))},"1"),Object(L.jsx)(F,{tab:Object(L.jsx)(Q,{showZero:!0,badgeContent:S.length,color:"secondary",children:Object(L.jsx)("h1",{className:"text-white pt-2  ",children:"My orders"})}),children:S&&S.map((function(e,t){return Object(L.jsx)(R.a,{in:!0,children:Object(L.jsx)(C.a.Ribbon,{color:"pending"===e.status?"volcano":"green",text:"pending"===e.status?"Tayyor emas":"Tayyor  ",children:Object(L.jsxs)(j.a,{className:"mb-4",children:[Object(L.jsxs)(x.a,{children:[Object(L.jsxs)("h1",{className:"text-yellow-500 text-xl font-bold",children:["ORDER #",S.length-t]}),Object(L.jsxs)("h3",{className:" text-green-400 text-sm font-bold ",children:[Number(e.time.split(":")[0])-(new Date).getHours()===0?(new Date).getMinutes()-Number(e.time.split(":")[1])+" min oldin":(new Date).getHours()-Number(e.time.split(":")[0])+" soat oldin","                                                                             "]}),Object(L.jsxs)("h2",{className:"absolute bottom-6 right-4  text-yellow-500 text-lg font-bold ",children:["Stol: ",e.table]}),Object(L.jsxs)("h3",{className:"text-white text-lg font-medium",children:["Jami taomlar:",S[t].foods.length]})]}),Object(L.jsxs)(h.a,{disableSpacing:!0,children:[Object(L.jsx)("h3",{className:"text-white text-lg font-medium",children:"Taomlar:"}),Object(L.jsx)("span",{className:"inline-block",children:Object(L.jsx)(f.a,{className:Object(w.a)(le.expand,Object(n.a)({},le.expandOpen,_[t]?_[t]:null)),onClick:function(){return function(e){ce(Object(c.a)(Object(c.a)({},ne),{},Object(n.a)({},e,!ne[e])))}(t)},"aria-expanded":_,"aria-label":"show more",children:Object(L.jsx)(p.a,{className:"text-white  mb-1",fontSize:"large"})})})]}),Object(L.jsx)(m.a,{in:ne[t]?ne[t]:null,timeout:"auto",unmountOnExit:!0,children:S[t].foods.map((function(e,t){return Object(L.jsx)(x.a,{children:Object(L.jsxs)("div",{children:[Object(L.jsxs)("span",{children:[Object(L.jsx)("p",{className:" text-white text-xl  uppercase",children:e.name}),Object(L.jsx)(g.a,{style:{background:"white"}})]}),Object(L.jsx)("h2",{className:" text-yellow-400 text-xl",children:" 2x "})]},t)})}))})]})})})}))},"2")]})})}),Object(L.jsx)(B.a,{style:{position:"fixed",bottom:"30px",right:"5px"},color:"secondary","aria-label":"add",onClick:function(){localStorage.setItem("details","false"),window.location.reload()},children:Object(L.jsx)(Y.a,{})})]}):Object(L.jsx)(M.a,{to:"/login"})}}}]);
//# sourceMappingURL=6.0aa70db8.chunk.js.map