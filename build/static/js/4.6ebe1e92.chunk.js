(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{476:function(e,t,n){"use strict";var a=n(1),r=n(7),i=n(0),o=(n(17),n(16)),c=n(21),l=n(97),s=n(262),d=n(27),u=i.forwardRef((function(e,t){var n=e.edge,c=void 0!==n&&n,l=e.children,u=e.classes,p=e.className,b=e.color,m=void 0===b?"default":b,j=e.disabled,f=void 0!==j&&j,h=e.disableFocusRipple,x=void 0!==h&&h,y=e.size,O=void 0===y?"medium":y,v=Object(r.a)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return i.createElement(s.a,Object(a.a)({className:Object(o.a)(u.root,p,"default"!==m&&u["color".concat(Object(d.a)(m))],f&&u.disabled,"small"===O&&u["size".concat(Object(d.a)(O))],{start:u.edgeStart,end:u.edgeEnd}[c]),centerRipple:!0,focusRipple:!x,disabled:f,ref:t},v),i.createElement("span",{className:u.label},l))}));t.a=Object(c.a)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:Object(l.a)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(l.a)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(l.a)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(u)},487:function(e,t,n){"use strict";n.r(t);var a=n(190);var r=n(201);function i(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=n(130),c=n(131),l=n(39),s=n.n(l),d=n(73),u=n(22),p=n(0),b=n(30),m=n(53),j=n.n(m),f=n(57),h=n.n(f),x=n(431),y=n(476),O=n(238),v=Object(O.a)(p.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),g=n(474),S=n(473),k=n(435),w=n(475),C=n(47),z=n(103),I=n(6);t.default=function(){var e=sessionStorage.getItem("tableNum"),t=Object(p.useContext)(C.b),n=Object(u.a)(t,2),a=n[0],r=n[1],l=Object(p.useState)([]),m=Object(u.a)(l,2),f=m[0],O=m[1],T=Object(p.useState)([]),q=Object(u.a)(T,2),N=q[0],R=q[1],E=Object(p.useState)([!1]),F=Object(u.a)(E,2),D=F[0],P=F[1],M=Object(p.useState)({}),W=Object(u.a)(M,2),A=W[0],B=(W[1],Object(p.useState)({modal:!1,alert:!1,promise:!1,popconfirm:!1})),V=Object(u.a)(B,2),$=V[0],H=V[1],J=Object(p.useState)(parseInt(e)),L=Object(u.a)(J,2),_=L[0],Y=L[1],G=Object(p.useState)(),K=Object(u.a)(G,2),Q=K[0],U=K[1],X=Object(p.useState)({tableNum:A,pr:[]}),Z=Object(u.a)(X,2),ee=Z[0],te=Z[1],ne=function(){te({tableNum:_,pr:[]}),H({modal:!1})};if(Object(p.useEffect)((function(){r.on("recieve-order",(function(e){Object(d.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(a,"/orders"));case 2:t=e.sent,n=t.data,R(n);case 5:case"end":return e.stop()}}),e)})))()})),Object(d.a)(s.a.mark((function e(){var t,n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(a,"/orders"));case 2:return t=e.sent,n=t.data,e.next=6,j.a.get("".concat(a,"/service"));case 6:r=e.sent,i=r.data,O(i),R(n);case 10:case"end":return e.stop()}}),e)})))()}),[]),"false"===localStorage.getItem("details")||!localStorage.getItem("details"))return Object(I.jsx)(b.a,{to:"/login"});var ae=[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u044f",dataIndex:"name",key:"name",render:function(e){return Object(I.jsx)("p",{children:e})}},{title:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",dataIndex:"price",key:"price",render:function(e){return Object(I.jsxs)("p",{children:[" ",Object(I.jsx)(h.a,{value:e,displayType:"text",suffix:" sum",thousandSeparator:!0,renderText:function(e){return Object(I.jsxs)("p",{className:"",children:[e," "]})}})]})}},{title:"\u041a\u043e\u043b-\u0432\u043e  ",dataIndex:"quantity",key:"quantity"},{title:"\u0421\u0443\u043c\u043c\u0430",dataIndex:"allprice",key:"allPrice",render:function(e){return Object(I.jsx)("p",{children:Object(I.jsx)(h.a,{value:e,displayType:"text",suffix:" sum",thousandSeparator:!0,renderText:function(e){return Object(I.jsxs)("p",{style:{color:"#187CDF",fontWeight:"bold"},children:[e," "]})}})})}},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",dataIndex:["name","allprice"],key:"delete",render:function(e,t){return Object(I.jsxs)("div",{children:[Object(I.jsx)(g.a,{placeholder:1,defaultValue:0,type:"number",size:"small",style:{height:"25px",width:"35px"},min:"1",max:t.quantity,onChange:function(e){return U((function(n){return Object(c.a)(Object(c.a)({},n),{},Object(o.a)({},t.id,e))}))}}),Object(I.jsx)(y.a,{onClick:function(){return e=t,void(Q&&(te((function(t){return{tableNum:_,pr:[].concat(i(t.pr),[{name:e.name,quantity:Q[e.id]}])}})),H({modal:!0})));var e},children:Object(I.jsx)(v,{fontSize:"medium"})})]})}}];function re(){j.a.post("".concat(a,"/reduce"),ee).then(window.location.reload())}console.log(ee);var ie=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate()+"/"+t+"/"+e.getFullYear();j()({method:"post",url:"".concat(a,"/status"),data:{date:n,money:D[0].money+D[0].money/100*f}})};return Object(I.jsx)("div",{children:Object(I.jsx)(x.a,{maxWidth:"sm",children:Object(I.jsxs)(z.a.div,{className:"cheklist",initial:{y:-900},animate:{y:0},transition:{duration:.5},children:[Object(I.jsxs)("div",{style:{marginBottom:"20px",width:"100%",display:"flex"},children:[Object(I.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[Object(I.jsx)("p",{style:{fontSize:"16px"},children:"\u0421\u0442\u043e\u043b: "}),Object(I.jsx)(g.a,{placeholder:_,defaultValue:_,type:"number",size:"small",style:{height:"25px",width:"50px"},min:"0",max:"500  ",onChange:function(e){return function(e){Y(parseInt(e)),sessionStorage.setItem("tableNum",e)}(parseInt(e))}})]}),Object(I.jsx)(z.a.button,{whileTap:{scale:1.1},className:"filterButton",onClick:function(){!function(){var e={},t=N.filter((function(e){return e.table===_})).reduce((function(t,n){return t.table=n.table,t.foods=[],t.id=n._id,t.money?t.money=t.money+n.money:t.money=n.money,n.foods.forEach((function(t){e[t.name]?(e[t.name].q=e[t.name].q+t.quantity,e[t.name].id=e[t.name].id+t.quantity,e[t.name].price=e[t.name].price+t.price,e[t.name].allpPrice=e[t.name].allpPrice+t.price*t.quantity):e[t.name]={q:t.quantity,id:t._id,price:t.price,allPrice:t.price*t.quantity}})),t}),{});e=Object.entries(e).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return{name:n,quantity:a.q,price:a.price,allprice:a.allPrice,id:a.id}})),t.foods=e,P([t])}()},children:"\u041f\u043e\u0438\u0441\u043a"})]}),D.map((function(e,t){return Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{children:Object(I.jsx)(S.a,{size:"middle",columns:ae,dataSource:e.foods})}),Object(I.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[Object(I.jsxs)("div",{style:{display:"flex",gap:"20px"},children:[" ",Object(I.jsx)(h.a,{value:e.money,displayType:"text",suffix:" sum",thousandSeparator:!0,renderText:function(e){return Object(I.jsxs)("p",{style:{fontSize:"19px"},children:["\u0412\u0441\u0435\u0433\u043e:"," ",Object(I.jsx)("span",{style:{fontWeight:"bold",color:"#187CDF"},children:e})]})}}),Object(I.jsxs)("p",{style:{fontSize:"19px"},children:["\u0423\u0441\u043b\u0443\u0433\u0430: ","",Object(I.jsxs)("span",{style:{fontWeight:"bold",color:"#187CDF"},children:[f,"%"]})]})]}),Object(I.jsxs)("div",{children:[" ",Object(I.jsxs)("p",{style:{fontSize:"22px"},children:["\u0421 \u0443\u0441\u043b\u043e\u0433\u043e\u0439: ","",Object(I.jsx)(h.a,{value:Math.trunc(e.money+e.money/100*f),displayType:"text",suffix:" sum",thousandSeparator:!0,renderText:function(e){return Object(I.jsx)("span",{style:{fontWeight:"bold",color:"#FF3131"},children:e})}})]})]})]}),Object(I.jsx)("center",{children:Object(I.jsx)(k.a,{title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f",visible:$.popconfirm,onConfirm:function(){return t=e.table,H({promise:!0}),r.emit("done-order",t),ie(),void setTimeout((function(){H({promise:!1}),window.location.reload()}),1e3);var t},okButtonProps:{loading:$.promise},onCancel:function(){return H({popconfirm:!1})},children:Object(I.jsx)(z.a.button,{whileTap:{scale:1.1},className:"pl w-10/12 m-auto",style:{marginTop:"60px"},onClick:function(){return H({popconfirm:!0})},children:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043d\u043e"})})}),Object(I.jsx)(w.a,{title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f",onOk:re,onCancel:ne,okText:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",cancelText:"\u041d\u0430\u0437\u0430\u0434",visible:$.modal,height:100,children:Object(I.jsx)("p",{children:"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u044b, \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?"})})]})}))]})})})}}}]);
//# sourceMappingURL=4.6ebe1e92.chunk.js.map